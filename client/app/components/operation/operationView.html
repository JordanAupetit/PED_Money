
<div class="container">

    <div class="mb20">
        <input datepicker type="text" ng-model="operationCreateModel.dateOperation" class="form-control mb10 wid170 ftl mr10" placeholder="Date de l'opération">

        <!-- TODO 

        Ajouter une case à cocher pour faire apparaitre ou non l'input de la date prélèvement
        -->

        <input datepicker type="text" ng-model="operationCreateModel.datePrelevement" class="form-control mb10 wid170 ftl mr10" placeholder="Date du prélèvement">
        <input type="text" ng-model="operationCreateModel.description" class="form-control mb10 wid200 ftl mr10" placeholder="Description">
        <input type="text" ng-model="operationCreateModel.thirdParty" class="form-control mb10 wid150 ftl mr10" placeholder="Tiers">
        <input type="text" ng-model="operationCreateModel.type" class="form-control mb10 wid150 ftl mr10" placeholder="Type">
        <input type="text" ng-model="operationCreateModel.value" class="form-control mb10 wid100 ftl mr10" placeholder="Montant">
        <button ng-click="addOperation()" class="btn btn-default">Ajouter</button>
    </div>

    <div ng-if="operations.length > 0" class="mb20">
        <strong>Solde : </strong>

        <span ng-if="solde <= 0" class="colorRed">
            {{ solde }}€
        </span>
        <span ng-if="solde > 0" class="colorGreen">
            +{{ solde }}€
        </span>

    </div>

    <table ng-if="operations.length > 0" class="table table-bordered table-striped">
        <thead>
            <tr>
                <th class="algcenter">Date</th>
                <th class="algcenter">Valeur</th>
                <th class="algcenter">Operation</th>
                <th class="algcenter">Tiers</th>
                <th class="algcenter">Type</th>
                <th class="algcenter">Débit</th>
                <th class="algcenter">Crédit</th>
                <th class="algcenter">Validé</th>
                <th class="algcenter">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="op in operations">
                <td class="wid150">
                    <span ng-hide="op.editable">{{ op.dateOperation }}</span>
                    <input ng-hide="!op.editable" datepicker type="text" class="form-control" ng-model="op.dateOperation">
                </td>
                <td>
                    <span ng-hide="op.editable">{{ op.datePrelevement }}</span>
                    <input ng-hide="!op.editable" datepicker type="text" class="form-control" ng-model="op.datePrelevement">
                </td>
                <td>
                    <span ng-hide="op.editable">{{ op.description }}</span>
                    <input ng-hide="!op.editable" type="text" class="form-control" ng-model="op.description">
                </td>
                <td>
                    <span ng-hide="op.editable">{{ op.thirdParty }}</span>
                    <input ng-hide="!op.editable" type="text" class="form-control" ng-model="op.thirdParty">
                </td>
                <td>
                    <span ng-hide="op.editable">{{ op.type }}</span>
                    <input ng-hide="!op.editable" type="text" class="form-control" ng-model="op.type">
                </td>
                <td>
                    <span ng-hide="op.editable" ng-if="op.value <= 0" class="colorRed">
                        {{ op.value }}
                    </span>
                    <!-- <input ng-hide="!op.editable" ng-if="op.value <= 0" type="text" class="form-control" ng-model="op.value"> -->
                </td>
                <td>
                    <span ng-hide="op.editable" ng-if="op.value > 0" class="colorGreen">
                        +{{ op.value }}
                    </span>
                    <input ng-hide="!op.editable" type="number" class="form-control" ng-model="op.value">
                </td>
                <td class="algcenter wid50">
                    <input ng-click="validateOperation(op)" type="checkbox" ng-model="op.checked">
                </td>
                <td class="algcenter minwid100">
                    <button ng-hide="!op.editable" ng-click="updateOperation(op)" class="doUpdateOperation btn btn-primary btn-xs">
                        Save
                    </button>
                    <button ng-hide="op.editable" ng-click="showUpdateOperation(op)" class="showUpdateOperation btn btn-warning btn-xs">
                        Edit
                    </button>
                    <button ng-click="deleteOperation(op._id)" class="btn btn-danger btn-xs">
                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

    <span ng-if="operations.length <= 0">Il n'y a encore aucunes opérations sur ce compte.</span>

</div>